<!DOCTYPE html><html lang="pt-BR"><head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>KUROMI ASSISTENTE ☆</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html, body {
      height: 100%;
      font-family: 'Inter', sans-serif;
      background: url('51MW7Uq.jpeg') no-repeat center center fixed;
      background-size: cover;
    }
    body {
      display: flex;
      flex-direction: column;
      color: #000;
    }
    #créditos-btn {
      position: fixed;
      top: 10px;
      right: 10px;
      background: rgba(0, 0, 0, 0.7);
      color: red;
      border: none;
      font-size: 14px;
      padding: 6px 10px;
      border-radius: 6px;
      cursor: pointer;
      z-index: 1000;
      opacity: 0.8;
    }
    #créditos-btn:hover {
      opacity: 1;
      background: rgba(0, 0, 0, 0.9);
    }
    #perfil-bot {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px;
      background: rgba(0, 0, 0, 0.6);
      color: red;
    }
    #perfil-bot img {
      width: 50px;
      height: 50px;
      border-radius: 50%;
    }
    #chat-log {
      flex: 1;
      overflow-y: auto;
      padding: 16px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .bot-message {
      display: flex;
      align-items: flex-start;
      gap: 8px;
      max-width: 80%;
      background-color: #FF5F0000;
      padding: 12px 16px;
      border-radius: 12px;
      animation: slideIn 0.3s ease;
    }
    .bot-message img {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      margin-top: 2px;
    }
    .bot-message .text {
      color: gray;
      word-wrap: break-word;
      line-height: 1.5;
    }
    #chat-log p.user {
      max-width: 60%;
      padding: 12px 16px;
      border-radius: 12px;
      background-color: #444;
      color: #red;
      margin-left: auto;
      text-align: right;
      animation: slideIn 0.3s ease;
      word-wrap: break-word;
    }
    #chat-input-container {
      display: flex;
      gap: 8px;
      padding: 12px;
      background-color: #FF5F0000;
      border-top: 1px solid #ccc;
    }
    #chat-input {
      flex: 1;
      padding: 12px;
      border-radius: 8px;
      border: 1px solid #ccc;
    }
    #send-btn, #audio-btn {
      padding: 12px 18px;
      background-color: #444;
      color: gray;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    #send-btn:hover, #audio-btn:hover {
      background-color: #005fcc;
    }
    @keyframes slideIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>

  <button id="créditos-btn">💻 créditos</button>

  <div id="perfil-bot">
    <img src="olpczo.jpg" alt="Bot Profile">
    <div>
      <div><strong>KUROMI ASSISTENTE</strong></div>
      <div style="font-size: 0.89em;">Sua assistente pessoal</div>
    </div>
  </div>

  <div id="chat-log"></div>

  <div id="chat-input-container">
    <input type="text" id="chat-input" placeholder="Digite sua mensagem...">
    <button id="audio-btn">🎤</button>
    <button id="send-btn">Enviar</button>
  </div>

  <script>
    const chatLog = document.getElementById('chat-log');
    const chatInput = document.getElementById('chat-input');
    const sendBtn = document.getElementById('send-btn');
    const audioBtn = document.getElementById('audio-btn');

    const IA_BACKEND = "https://blackout-api.speedhosting.cloud"; // ou substitua pela URL externa do seu servidor se necessário
    const API_KEY = 'AIzaSyAjX8xzFT6jglVEqX6yGr0TAPh25TRRg00'; // Substitua se necessário
    const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${API_KEY}`;

    function adicionarMensagem(texto, classe) {
      if (classe === 'bot') {
        const container = document.createElement('div');
        container.className = 'bot-message';

        const img = document.createElement('img');
        img.src = 'https://files.catbox.moe/olpczo.jpg';
        img.alt = 'Bot';

        const msg = document.createElement('div');
        msg.className = 'text';
        msg.innerHTML = texto;

        container.appendChild(img);
        container.appendChild(msg);
        chatLog.appendChild(container);
      } else {
        const p = document.createElement('p');
        p.className = classe;
        p.innerHTML = texto;
        chatLog.appendChild(p);
      }

      chatLog.scrollTop = chatLog.scrollHeight;
    }

    async function enviarParaIA(texto) {
      if (/toshiruz/i.test(texto)) {
        adicionarMensagem("BLACKOUT: 👋 Olá! Quer conhecer os criadores? Toque no botão 💻 créditos no canto superior direito!", 'bot');
        return;
      }
      
       if (/preços/i.test(texto)) {
        adicionarMensagem("BLACKOUT: ✅Temos resques aparti de um real. voce garante.1.000 resques para usar livremente para saber os pacotes disponíveis! acesse planos 💎", 'bot');
        return;
      }
      
      if (/preço/i.test(texto)) {
        adicionarMensagem("BLACKOUT: ✅1.000 resques 1R$/ 5.000 resques 5R$/ 10.000 resques 10R$/ 20.000 resques 20R$/ 30.000 resques 30R$", 'bot');
        return;
      }
      
      if (/api/i.test(texto)) {
        adicionarMensagem("BLACKOUT: 💌Ola nossa api. alem de ser estavel também responde rapidamente excelente para qualquer projeto😉♥️", 'bot');
        return;
      }
      
       if (/bot/i.test(texto)) {
        adicionarMensagem("BLACKOUT: 💌Ola Também temos bots disponível para downloads acesso esta em bots e host estara. disponível também a hospedagem que eu estou conectada 😊♥️", 'bot');
        return;
      }
      
      if (/xvideos/i.test(texto)) {
        adicionarMensagem("BLACKOUT: 💌Ola para ter acesso a esse tipo de conteúdo so no menu da blackaut api nao posso te ajudar😭 ", 'bot');
        return;
      }
      
      if (/suporte/i.test(texto)) {
        adicionarMensagem("BLACKOUT: 💌Ola para suporte é so voce ir em planos comprar resques que vai direto pessoalmente falar com meu criador Toshiruz dev", 'bot');
        return;
      }
      
       if (/curtidas/i.test(texto)) {
        adicionarMensagem("BLACKOUT: 💌Ola participe com a gente qual dos vips voce curte mais 😉 queremos saber click na imagem de quem voce gosta mais e de seu.like", 'bot');
        return;
      }
      
      if (/tubex/i.test(texto)) {
        adicionarMensagem("BLACKOUT: 💌Ola gostou do tubex né , então simplesmente é um simulado do YouTube feita com nossa própria api onde você pode escutar música ver vídeos e fazer downloads gostou né somos totalmente originais bb😉 lembrando quando botão estiver verde esta carregando leva meio segundo 😊", 'bot');
        return;
      }
      
      if (/gostosa/i.test(texto)) {
        adicionarMensagem("BLACKOUT: 💌 Hummm você sabia que apertando no ícone do microfone abaixo eu posso ler o que digitei em voz alta para você 😉", 'bot');
        return;
      }
      
      const tocar = texto.match(/tocar\s(?:m[úu]sica|som)?\s?(.+)/i);
      if (tocar) {
        const nomeMusica = tocar[1];
        try {
          adicionarMensagem("🎧 Buscando música...", "bot");
          const res = await fetch(`${IA_BACKEND}/baixar-musica?nome=${encodeURIComponent(nomeMusica)}`);
          const dados = await res.json();

          if (dados.erro) throw new Error(dados.erro);

          adicionarMensagem(`
            <strong>🎶 Tocando agora:</strong><br>
            <img src="${dados.imagem}" width="100%"><br>
            <strong>${dados.titulo}</strong><br>
            <audio controls autoplay src="${dados.audio_url}"></audio><br>
            <a href="${dados.audio_url}" download>⬇️ Baixar MP3</a>
          `, 'bot');
        } catch (err) {
          adicionarMensagem(`❌ Erro: ${err.message}`, "bot");
        }
        return;
      }

      try {
        const res = await fetch(API_URL, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ contents: [{ parts: [{ text: texto }] }] })
        });

        const data = await res.json();
        let resposta = data?.candidates?.[0]?.content?.parts?.[0]?.text || '❌ Não entendi.';
        adicionarMensagem(`BLACKOUT: ${resposta}`, 'bot');
      } catch (err) {
        adicionarMensagem(`❌ Erro: ${err.message}`, 'bot');
      }
    }

    sendBtn.onclick = () => {
      const texto = chatInput.value.trim();
      if (!texto) return;
      adicionarMensagem(texto, 'user');
      chatInput.value = '';
      enviarParaIA(texto);
    };

    chatInput.addEventListener('keydown', e => {
      if (e.key === 'Enter') sendBtn.click();
    });

    audioBtn.onclick = () => {
      const synth = window.speechSynthesis;
      const ultimoBot = [...chatLog.querySelectorAll('.bot-message .text')].pop();
      if (ultimoBot) {
        const texto = ultimoBot.textContent.replace(/^BLACKOUT:\s*/, '');
        const utter = new SpeechSynthesisUtterance(texto);
        utter.lang = 'pt-BR';
        synth.speak(utter);
      }
    };

    document.getElementById('créditos-btn').onclick = () => {
      window.open('/credito', '_blank');
    };
  </script>


</body></html>
